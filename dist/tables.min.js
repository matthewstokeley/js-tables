/*! tables 13-02-2017 */
var tableModules={};!function(a){var b=function(a){this.table=a.table,this.tableHeaders=a.tableHeaders,this.tableRows=a.tableRows,this.order=!1,this.newRows=[],this.pagination=a.pagination||!1,this.listen()};b.prototype.createColumns=function(){},b.prototype.listen=function(){Array.prototype.forEach.call(this.tableHeaders,this.addEventListener.bind(this))},b.prototype.addEventListener=function(a,b){a.addEventListener("click",function(){this.onClick.call(this,a,b)}.bind(this))},b.prototype.onClick=function(a,b){this.appendNewRows(a,b).updateOrder(a).reset(),events.emit("columnSorted")},b.prototype.updateOrder=function(a){return this.order=this.updateTableHeader.call(this,this.order,a),this},b.prototype.appendNewRows=function(a,b){return this.table.innerHTML=this.createNewRows(a,b).join(""),this},b.prototype.reset=function(){return this.resetNewRows(),this.checkInputs(),this.initPagination(),this},b.prototype.getColumn=function(a){return Array.prototype.map.call(this.tableRows,function(b,c){return this.findColumn(b,c,a)}.bind(this))},b.prototype.getColumnValues=function(a){return a.map(this.findColumnValue)},b.prototype.getSortedValues=function(a,b){return this.sortValues.call(this,this.getColumnValues(this.getColumn(b)),a,this.tableRows)},b.prototype.getSortedRows=function(a,b){return this.getSortedValues(a,b).map(function(a){return this.sortRows.call(this,a,this.tableRows,b)}.bind(this))},b.prototype.createNewRows=function(a,b){return this.newRows=this.getSortedRows(a,b).map(function(a,b){return $$.createElement({element:"div",properties:{childNode:a}}).innerHTML}.bind(this)),this.newRows},b.prototype.resetNewRows=function(){return this.newRows=[],this},b.prototype.initPagination=function(){return this.pagination&&this.pagination.init(),this},b.prototype.findColumn=function(a,b,c){return a.getElementsByTagName("td")[c]},b.prototype.findColumnValue=function(a){var b=a.getElementsByTagName("span");if(b&&b[0]&&b[0].dataset&&b[0].dataset.value)return{column:a,value:b[0].dataset.value}},b.prototype.updateTableHeader=function(a,b){switch(a){case!1:return this.toggleTableHeaderClass(b,"asc"),"asc";case"asc":return this.toggleTableHeaderClass(b,"desc"),"desc";case"desc":return this.toggleTableHeaderClass(b,"asc"),"asc"}},b.prototype.sortValues=function(a,b,c){return a.sort(function(a,b){return this.order===!1||"desc"===this.order?alphabetize(b.value)-alphabetize(a.value):"asc"===this.order?alphabetize(a.value)-alphabetize(b.value):void 0}.bind(this))},b.prototype.toggleTableHeaderClass=function(a,b){$$.removeClass(a,"header__column--asc"),$$.removeClass(a,"header__column--desc"),$$.addClass(a,"header__column--"+b),a.dataset.direction=b},b.prototype.sortRows=function(a,b,c){return b=Array.prototype.filter.call(b,function(b){var d=b.getElementsByTagName("td")[c];if(d===a.column)return void 0!==b&&b}.bind(this)),b[0]},b.prototype.checkInputs=function(){var a=this.table.getElementsByTagName("input");return Array.prototype.forEach.call(a,function(a){a.dataset&&a.dataset.checked&&"true"===a.dataset.checked&&(a.checked=!0)}),this},a||(a={}),a.ColumnSorter=b}(tableModules),function(a){var b=function(a){this.table=a.table,this.headerCells=a.headerCells,this.rows=a.tableRows,this.checkboxes=a.columnSorter,this.columns=this.mapColumns(),this.listen()};b.prototype.listen=function(){Array.prototype.forEach.call(this.checkboxes,this.addCheckboxListener.bind(this))},b.prototype.addCheckboxListener=function(a,b){a.addEventListener("change",this.toggle.bind(this))},b.prototype.toggle=function(a){this.setActiveColumn(a).updateElement()},b.prototype.setActiveColumn=function(a){return console.log(a.target.dataset.index),this.activeColumn={name:a.target.dataset.name,state:a.target.dataset.state,index:a.target.dataset.index,th:this.headerCells[a.target.dataset.index],columns:Array.prototype.map.call(this.columns,function(b){return b[a.target.dataset.index]}),checkbox:a.target},this},b.prototype.updateElement=function(){return Array.prototype.forEach.call(this.activeColumn.columns,this.updateColumn.bind(this)),this.activeColumn.checkbox.dataset.state="active"===this.activeColumn.state?"inactive":"active",this.activeColumn.th.style.display="active"===this.activeColumn.state?"none":"table-cell",this.activeColumn.th.dataset.state="active"===this.activeColumn.state?"inactive":"active",this},b.prototype.updateColumn=function(a){return!(!a||void 0===a)&&(a.style.display="active"===this.activeColumn.state?"none":"table-cell",this)},b.prototype.mapColumns=function(){return Array.prototype.map.call(this.rows,this.getCell.bind(this))},b.prototype.getCell=function(a){return a.getElementsByTagName("td")},a||(a={}),a.ColumnToggle=b}(tableModules),function(a){var b=function(a){this.input=a.input,this.table=a.table,this.rows=a.tableRows,this.pagination=a.pagination,this.listen()};b.prototype.listen=function(){this.input.addEventListener("keyup",this.find.bind(this))},b.prototype.getValue=function(){return this.input.value},b.prototype.find=function(){Array.prototype.forEach.call(this.rows,this.search.bind(this))},b.prototype.loopCells=function(a){return Array.prototype.map.call(a,this.isRowFound.bind(this))},b.prototype.search=function(a){return this.doesArrayContainTrue(this.loopCells(a.getElementsByTagName("td")))===!1?this.hideRow(a):this.showRow(a)},b.prototype.getCellValue=function(a){return a.getElementsByTagName("span")[0].dataset.value},b.prototype.isRowFound=function(a,b){return this.getCellValue(a).indexOf(this.getValue())!==-1},b.prototype.showRow=function(a){a.style.display="table-row"},b.prototype.hideRow=function(a){a.style.display="none"},b.prototype.doesArrayContainTrue=function(a){for(var b=0;b<a.length;b++)if(a[b]===!0)return!0;return!1},a||(a={}),a.Filter=b}(tableModules),function(a){var b=function(a){this.pages=[],this.table=a.table,this.th=document.getElementsByTagName("th"),this.rows=this.table.getElementsByTagName("tr"),this.itemsPerPage=a.itemsPerPage,this.statusElement=document.getElementById("pagination-current"),this.navElement=document.getElementById("pagination-nav"),this.navLinks=document.getElementsByClassName("pagination__link"),this.init.call(this),this.listen.call(this)};b.prototype.init=function(){this.paginate.call(this),this.pageNumber=this.getPageNumber.call(this),this.showPage.call(this),this.updateStatusElement.call(this),this.updateNavigationTemplate.call(this)},b.prototype.listen=function(){Array.prototype.forEach.call(this.navLinks,function(a){a.addEventListener("click",function(){this.changePages(a)}.bind(this))}.bind(this))},b.prototype.paginate=function(){this.pages=[];for(var a=0,b=[],c=0;c<this.rows.length;c++)a===this.itemsPerPage&&(a=0,this.pages.push(b),b=[]),this.hideRow(this.rows[c]),b.push(this.rows[c]),a++;for(b=[],c=this.rows.length-(this.rows.length-this.pages.length*this.itemsPerPage);c<this.rows.length;)b.push(this.rows[c]),c++;this.pages.push(b)},b.prototype.updateStatusElement=function(){this.statusElement.innerHTML=this.pageNumber+"/"+this.pages.length},b.prototype.updateNavigationTemplate=function(){},b.prototype.getWindowHash=function(){return window.location.hash},b.prototype.findPageNumber=function(a){return parseInt(a.match(new RegExp(/\#page=([0-9]*)/))[1],10)},b.prototype.getPageNumber=function(){return""===this.getWindowHash()?1:this.findPageNumber(this.getWindowHash())},b.prototype.changePages=function(a){this.nextPage=1,"forward"===a.dataset.direction&&this.pageNumber<this.pages.length?this.nextPage=this.pageNumber+1:"back"===a.dataset.direction&&this.pageNumber>1&&(this.nextPage=this.pageNumber-1),window.location.hash="#page="+this.nextPage,this.init()},b.prototype.getPageTotal=function(){return this.pages.length},b.prototype.showPage=function(){this.pages[this.pageNumber-1].forEach(this.showRow)},b.prototype.showRow=function(a){a.style.display="table-row"},b.prototype.hideRow=function(a){a.style.display="none"},a||(a={}),a.Pagination=b}(tableModules);var Table=function(a){var b,c=document.getElementById(a.body),d=document.getElementsByClassName(a.rows),e=document.getElementsByClassName(a.headerCell),f=document.getElementsByClassName(a.columnSorter);try{b=new tableModules.Pagination({table:c,itemsPerPage:a.pagination.itemsPerPage})}catch(g){console.trace(g)}var h=function(){var a;try{a=new tableModules.ColumnSorter({table:c,tableHeaders:e,tableRows:d,pagination:b})}catch(f){console.trace(f)}return a},i=function(){var e;try{e=new tableModules.Filter({table:c,input:document.getElementById(a.filter),tableRows:d,pagination:b})}catch(f){console.trace(f)}return e},j=function(){var a;try{a=new tableModules.ColumnToggle({table:c,headerCells:e,tableRows:d,columnSorter:f})}catch(b){console.trace(b)}return a};__.mapMethods({fn:[h,i,j],args:[]})};